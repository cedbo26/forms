<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Suivi Sorya</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f4ec;
      padding: 20px;
      line-height: 1.6;
    }
    h2 {
      margin-top: 2em;
    }
    .question {
      margin-bottom: 1.5em;
      padding: 1em;
      border-left: 4px solid #c2a278;
      background: #fffdf9;
      border-radius: 8px;
    }
    .sub-block {
      margin-left: 1em;
      margin-top: 0.8em;
      padding: 0.8em;
      background: #f4f1eb;
      border-left: 3px dashed #bbb;
      border-radius: 6px;
    }
    label {
      display: block;
      margin: 6px 0;
    }
    input[type="radio"],
    input[type="checkbox"] {
      transform: scale(1.3);
      margin-right: 0.5em;
    }
    .hidden {
      display: none;
    }
    .contact-label {
      font-weight: bold;
      font-size: 1.05em;
    }
    .id-tag {
      font-size: 0.8em;
      color: #888;
      font-style: italic;
    }
  </style>
</head>
<body>

  <form id="soryaForm">

    <div class="question" id="q1">
      <label><strong>1. As-tu √©t√© en contact avec quelqu‚Äôun aujourd‚Äôhui ?</strong> <span class="id-tag">[Q1]</span></label>
      <label><input type="radio" name="contact_today" value="oui" onclick="showContacts(true)"> Oui</label>
      <label><input type="radio" name="contact_today" value="non" onclick="showContacts(false)"> Non</label>
    </div>

    <div class="question hidden" id="q1_2">
      <label><strong>1.2 Qui ?</strong> <span class="id-tag">[Q1.2]</span></label>
      <label><input type="checkbox" name="contact[]" value="javi" onclick="togglePersonBlock('javi')"> üßç Javi <span class="id-tag">(P1)</span></label>
      <div id="javi_block" class="hidden sub-block"></div>

      <label><input type="checkbox" name="contact[]" value="nathan" onclick="togglePersonBlock('nathan')"> üßç Nathan <span class="id-tag">(P2)</span></label>
      <div id="nathan_block" class="hidden sub-block"></div>

      <label><input type="checkbox" name="contact[]" value="famille" onclick="togglePersonBlock('famille')"> üë™ Membre de la famille <span class="id-tag">(P3)</span></label>
      <div id="famille_block" class="hidden sub-block"></div>

      <label><input type="checkbox" name="contact[]" value="autre" onclick="togglePersonBlock('autre')"> ‚ùì Autre <span class="id-tag">(P4)</span></label>
      <div id="autre_block" class="hidden sub-block"></div>
    </div>

  </form>

  <script>
    function showContacts(isYes) {
      const q1_2 = document.getElementById('q1_2');
      if (isYes) {
        q1_2.classList.remove('hidden');
      } else {
        q1_2.classList.add('hidden');
        alert("Alors va manger tes morts");
      }
    }

    function togglePersonBlock(person) {
      const block = document.getElementById(`${person}_block`);
      if (block.classList.contains('hidden')) {
        block.innerHTML = generateContactBlock(person);
        block.classList.remove('hidden');
      } else {
        block.classList.add('hidden');
        block.innerHTML = '';
      }
    }

    function generateContactBlock(person) {
      return `
        <label class="contact-label">1.3.1 Type de contact <span class="id-tag">[Q1.3.1.${person}]</span></label>
        <label><input type="checkbox" name="${person}_contact_type[]" value="ensemble" onclick="toggleSubQuestions('${person}', 'ensemble')"> Ensemble</label>
        <label><input type="checkbox" name="${person}_contact_type[]" value="t√©l√©phone"> Par t√©l√©phone</label>
        <label><input type="checkbox" name="${person}_contact_type[]" value="message"> Par message</label>
        <div id="${person}_ensemble_block" class="hidden sub-block"></div>
      `;
    }

    function toggleSubQuestions(person, mode) {
      const block = document.getElementById(`${person}_ensemble_block`);
      if (mode === 'ensemble') {
        block.innerHTML = `
          <label>1.3.2 Qualit√© du moment ? <span class="id-tag">[Q1.3.2.${person}]</span></label>
          <select name="${person}_qualite">
            <option value="">Choisir‚Ä¶</option>
            <option value="bon">Bon</option>
            <option value="mitig√©">Mitig√©</option>
            <option value="tendu">Tendu</option>
            <option value="aucune_idee">Aucune id√©e</option>
          </select>

          <label>1.3.3 As-tu pens√© √† quelqu‚Äôun d‚Äôautre pendant ce moment ? <span class="id-tag">[Q1.3.3.${person}]</span></label>
          <label><input type="radio" name="${person}_pense_autre" value="oui"> Oui</label>
          <label><input type="radio" name="${person}_pense_autre" value="non"> Non</label>
        `;
        block.classList.remove('hidden');
      }
    }
  </script>

</body>
</html>